<html>



  <head>
    <title>Perfect Physics</title>
    <meta charset="utf-8">
    <script defer src="https://pyscript.net/unstable/pyscript.js"></script>
    <link rel="stylesheet" href="https://pyscript.net/unstable/pyscript.css">
    <style>
      .py-repl-run-button {
          opacity: 1 
      }
    </style>
      <style>
      .container {
  max-width: 1000px; /* Adjust this value to set the desired maximum width */
  margin: 0 auto;   /* Centers the container horizontally */
  padding: 0 20px;  /* Adds some horizontal padding */
}    </style>
  </head>
  <body>
    <div class="container">

      <script>
  function clearOutput(divId) {
    const outputDiv = document.getElementById(divId);
    outputDiv.innerHTML = '';
  }
        </script>      
    <py-script>
      from perfect_physics import World, Circle, Wall
      def run_in_place(world, steps, target, fig_factor=1):
        js.document.getElementById(target).innerHTML = ''
        world.run_in_place(steps, show=True,
         show_fun=lambda figure: display(figure, target=target, append=True),
         figsize=(19.2 / 4, 10.8 / 4 * fig_factor)
         )
    </py-script>

    <py-config>
      packages = ["matplotlib", "pandas", "seaborn", "cloudpickle",
                  "perfect-physics==0.1.9"]
      plugins = ['replstatus.py']
    </py-config>

    <H2>Newton's Cradle</H2>

    <p>To run, click the triangle or press shift-enter. May take 10's of seconds to run.</p>
    <p>Ideas: Change the number of balls or number of steps.</p>

    <py-repl output="newtonOutput">
      circle_list = [Circle(x=1, y=0, r=1, vx=1, vy=0, m=1)]
      for i in range(1, 5):
          circle_list.append(Circle(x=i * 2 + 4, y=0, r=1, vx=0, vy=0, m=1))
      wall_list = [Wall(x0=0, y0=0, x1=0, y1=1), Wall(x0=20, y0=0, x1=20, y1=1)]
      world = World(circle_list, wall_list, xlim=(-1, 21), ylim=(-2, 2))
      run_in_place(world, steps=5, target="newtonOutput", fig_factor=0.5)
    </py-repl>
    <button id="clearButton" onclick="clearOutput('newtonOutput')">clear</button>

    <div id="newtonOutput"></div>


    <H2>Tennis Balls and Basketball</H2>

    <p>Ideas: Change the number of steps.</p>

    <py-repl output="tennisOutput">
      big_radius = 10
      world_width = 40
      big = Circle(x=world_width // 2, y=0, r=big_radius, vx=1, vy=0, m=big_radius**3)
      little = Circle(x=big.x - big_radius - 1, y=0, r=1, vx=1, vy=0, m=1)
      circle_list = [big, little]
      wall_list = [Wall(x0=0, y0=0, x1=0, y1=1), Wall(x0=world_width, y0=0, x1=world_width, y1=1)]
      world = World(circle_list, wall_list, xlim=(-1, world_width + 1), ylim=(-big_radius - 1, big_radius + 1))
      run_in_place(world, steps=2, target="tennisOutput")
      display(f"little vx is approx. {float(little.vx):.2f}", target="tennisOutput", append=True)
    </py-repl>
    <button id="clearButton" onclick="clearOutput('tennisOutput')">clear</button>

    <div id="tennisOutput"></div>


    </div>
  </body>
</html>